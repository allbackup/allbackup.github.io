<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>hotshot</title>
<style type='text/css'>body { font: 100% Georgia, Times, serif; } a.nav:link, a.nav:visited { color: #88f; } .nav { color: #88f; } a.nav:hover { color: blue; } .mark { color: #048444; }</style>
<meta http-equiv='Content-Type' content='text/html;charset=utf-8' />
</head><body>
<table style='font-size: 8pt; background: #efe; padding: 5px; border: 1px solid #084; margin: 0px 0px 20px 0px;' border='0' cellspacing='0' cellpadding='0' width='100%'><tr><td align='left'>
an alternative python reference (<a href='/zone/pythondoc-lib.htm'>in progress</a>)
</td><td align='right'>
<a href='http://docs.python.org/lib/module-hotshot.html'>original</a> :::
<a href='hotshot.txt'>source</a> :::
<a href='/lib/index.html'>index</a>
</td></tr></table><table style='font-size: 8pt; background: white; padding: 5px; border: 1px solid #084; margin: 0px 0px 20px 0px;' border='0' cellspacing='0' cellpadding='0' width='100%%'><tr><td align='left'>
<b>note:</b> this page has been automatically converted from python.org
sources, and may contain errors and omissions introduced by the conversion
process.
</td></tr></table><div class="body"><div class="module">
<h1>hotshot&#8212;High performance logging profiler</h1>

<div class="toc"><dl><dt>On this page:</dt><dd><a href="#profile-objects">Profile Objects</a></dd><dd><a href="#using-hotshot-data">Using hotshot data</a></dd><dd><a href="#example-usage">Example Usage</a></dd></dl></div><p>New in version 2.2.</p>

<p>This module provides a nicer interface to the <code>_hotshot</code> C module. Hotshot is a
replacement for the existing <code>
profile</code> module. As it's written mostly in C, it should result
in a much smaller performance impact than the existing <code>profile</code> module.</p>

<p class="warning"><b>Warning:</b> The <code>hotshot</code> profiler does not yet work well
with threads. It is useful to use an unthreaded script to run the
profiler over the code you're interested in measuring if at all
possible.</p>
</div>
<dl><dt class="class" id="Profile"><b>class Profile(logfile[, lineevents[,
linetimings]])</b> <tt class="nav"><a class="nav" href="hotshot.Profile" title="bookmark">#</a>|<a class="nav" href="#" title="edit/suggest changes">!</a>|<a class="nav" href="#" title="search for related examples">&amp;</a></tt></dt>

<dd class="class">
<p>The profiler object. The argument <var>logfile</var> is the name
of a log file to use for logged profile data. The argument <var>
lineevents</var> specifies whether to generate events for every
source line, or just on function call/return. It defaults to <code>
0</code> (only log function call/return). The argument <var>
linetimings</var> specifies whether to record timing information.
It defaults to <code>1</code> (store timing information).</p>
</dd>
</dl><div class="text">
<h2 id="profile-objects">Profile Objects <a class="nav" href="#profile-objects">#</a></h2>

<p>Profile objects have the following methods:</p>
</div>
<dl><dt class="method" id="Profile.addinfo"><b>addinfo(key, value)</b> <tt class="nav"><a class="nav" href="hotshot.Profile.addinfo" title="bookmark">#</a>|<a class="nav" href="#" title="edit/suggest changes">!</a>|<a class="nav" href="#" title="search for related examples">&amp;</a></tt></dt>

<dd class="method">
<p>Add an arbitrary labelled value to the profile output.</p>
</dd>
<dt class="method" id="Profile.close"><b>close()</b> <tt class="nav"><a class="nav" href="hotshot.Profile.close" title="bookmark">#</a>|<a class="nav" href="#" title="edit/suggest changes">!</a>|<a class="nav" href="#" title="search for related examples">&amp;</a></tt></dt>

<dd class="method">
<p>Close the logfile and terminate the profiler.</p>
</dd>
<dt class="method" id="Profile.fileno"><b>fileno()</b> <tt class="nav"><a class="nav" href="hotshot.Profile.fileno" title="bookmark">#</a>|<a class="nav" href="#" title="edit/suggest changes">!</a>|<a class="nav" href="#" title="search for related examples">&amp;</a></tt></dt>

<dd class="method">
<p>Return the file descriptor of the profiler's log file.</p>
</dd>
<dt class="method" id="Profile.run"><b>run(cmd)</b> <tt class="nav"><a class="nav" href="hotshot.Profile.run" title="bookmark">#</a>|<a class="nav" href="#" title="edit/suggest changes">!</a>|<a class="nav" href="#" title="search for related examples">&amp;</a></tt></dt>

<dd class="method">
<p>Profile an <code>exec</code>-compatible
string in the script environment. The globals from the <code>__main__</code> module are used as both
the globals and locals for the script.</p>
</dd>
<dt class="method" id="Profile.runcall"><b>runcall(func, *args, **keywords)</b> <tt class="nav"><a class="nav" href="hotshot.Profile.runcall" title="bookmark">#</a>|<a class="nav" href="#" title="edit/suggest changes">!</a>|<a class="nav" href="#" title="search for related examples">&amp;</a></tt></dt>

<dd class="method">
<p>Profile a single call of a callable. Additional positional and
keyword arguments may be passed along; the result of the call is
returned, and exceptions are allowed to propagate cleanly, while
ensuring that profiling is disabled on the way out.</p>
</dd>
<dt class="method" id="Profile.runctx"><b>runctx(cmd, globals, locals)</b> <tt class="nav"><a class="nav" href="hotshot.Profile.runctx" title="bookmark">#</a>|<a class="nav" href="#" title="edit/suggest changes">!</a>|<a class="nav" href="#" title="search for related examples">&amp;</a></tt></dt>

<dd class="method">
<p>Evaluate an <code>exec</code>-compatible
string in a specific environment. The string is compiled before
profiling begins.</p>
</dd>
<dt class="method" id="Profile.start"><b>start()</b> <tt class="nav"><a class="nav" href="hotshot.Profile.start" title="bookmark">#</a>|<a class="nav" href="#" title="edit/suggest changes">!</a>|<a class="nav" href="#" title="search for related examples">&amp;</a></tt></dt>

<dd class="method">
<p>Start the profiler.</p>
</dd>
<dt class="method" id="Profile.stop"><b>stop()</b> <tt class="nav"><a class="nav" href="hotshot.Profile.stop" title="bookmark">#</a>|<a class="nav" href="#" title="edit/suggest changes">!</a>|<a class="nav" href="#" title="search for related examples">&amp;</a></tt></dt>

<dd class="method">
<p>Stop the profiler.</p>
</dd>
</dl><div class="text">
<h2 id="using-hotshot-data">Using hotshot data <a class="nav" href="#using-hotshot-data">#</a></h2>

<p>New in version 2.2.</p>

<p>This module loads hotshot profiling data into the standard <code>pstats</code> Stats objects.</p>
</div>
<dl><dt class="function" id="load"><b>load(filename)</b> <tt class="nav"><a class="nav" href="hotshot.load" title="bookmark">#</a>|<a class="nav" href="#" title="edit/suggest changes">!</a>|<a class="nav" href="#" title="search for related examples">&amp;</a></tt></dt>

<dd class="function">
<p>Load hotshot data from <var>filename</var>. Returns an instance
of the <code>pstats.Stats</code>
class.</p>
</dd>
</dl><div class="text"><span class="mark">@see</span> <code>Module profile</code> The profile module's Stats
class. 

<h2 id="example-usage">Example Usage <a class="nav" href="#example-usage">#</a></h2>

<p>Note that this example runs the python &#8220;benchmark&#8221;
pystones. It can take some time to run, and will produce large
output files.</p>

<pre>
&gt;&gt;&gt; import hotshot, hotshot.stats, test.pystone
&gt;&gt;&gt; prof = hotshot.Profile("stones.prof")
&gt;&gt;&gt; benchtime, stones = prof.runcall(test.pystone.pystones)
&gt;&gt;&gt; prof.close()
&gt;&gt;&gt; stats = hotshot.stats.load("stones.prof")
&gt;&gt;&gt; stats.strip_dirs()
&gt;&gt;&gt; stats.sort_stats('time', 'calls')
&gt;&gt;&gt; stats.print_stats(20)
         850004 function calls in 10.090 CPU seconds

   Ordered by: internal time, call count

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    3.295    3.295   10.090   10.090 pystone.py:79(Proc0)
   150000    1.315    0.000    1.315    0.000 pystone.py:203(Proc7)
    50000    1.313    0.000    1.463    0.000 pystone.py:229(Func2)
 .
 .
 .
</pre>
</div>
</div></body></html>
