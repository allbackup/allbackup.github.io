<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml"><link rel="shortcut icon" href="/media/img/effbot.ico"><link rel="stylesheet" href="/media/css/effbot-min.css" type="text/css" media="screen"><link rel="stylesheet" href="/media/css/effbotprint-min.css" type="text/css" media="print"><title>The fileinput&nbsp;module</title></head><body data-page-id="535"><div id="doc2" class="yui-t2"><div id="hd"></div><div id="bd"><div id="yui-main"><div class="yui-b"><div class="content"><div class="yui-g"><h1 class="maintitle">The fileinput&nbsp;module</h1></div><div class="yui-ge"><div class="yui-u first"><p>This module allows you to loop over the contents of one or more
text files.</p><div class="example">
<b style="example">Example: Using the
fileinput module to loop over a text file</b>
<pre>
# File: <a href="fileinput/fileinput-example-1.py">fileinput-example-1.py</a>

import fileinput
import sys

for line in fileinput.input("samples/sample.txt"):
    sys.stdout.write("-&gt; ")
    sys.stdout.write(line)

</pre><pre class="computeroutput" moreinfo="NONE">
-&gt; We will perhaps eventually be writing only small
-&gt; modules which are identified by name as they are
-&gt; used to build larger ones, so that devices like
-&gt; indentation, rather than delimiters, might become
-&gt; feasible for expressing local structure in the
-&gt; source language.
-&gt;      -- Donald E. Knuth, December 1974
</pre></div><p>You can pass in a single filename, or a list of filenames.  If
you leave out the filename argument, <b>fileinput</b> gets the names
from <b>sys.argv</b>.

</p><p>The module also allows you to get metainformation about the
current line. This includes <b>isfirstline</b>,
<b>filename</b>, and <b>lineno</b>:</p></div><div class="yui-u">&#160;</div></div><div class="yui-g"><div class="example wide">
<b style="example">Example: Using the
fileinput module to process multiple files</b>
<pre class="wide">
# File: <a href="fileinput/fileinput-example-2.py">fileinput-example-2.py</a>

import fileinput
import glob
import string, sys

for line in fileinput.input(glob.glob("samples/*.txt")):
    if fileinput.isfirstline(): # <i>first in a file?</i>
        sys.stderr.write("-- reading %s --\n" % fileinput.filename())
    sys.stdout.write(str(fileinput.lineno()) + " " + string.upper(line))

</pre><pre class="computeroutput wide" moreinfo="NONE">
-- reading samples\sample.txt --
1 WE WILL PERHAPS EVENTUALLY BE WRITING ONLY SMALL
2 MODULES WHICH ARE IDENTIFIED BY NAME AS THEY ARE
3 USED TO BUILD LARGER ONES, SO THAT DEVICES LIKE
4 INDENTATION, RATHER THAN DELIMITERS, MIGHT BECOME
5 FEASIBLE FOR EXPRESSING LOCAL STRUCTURE IN THE
6 SOURCE LANGUAGE.
7    -- DONALD E. KNUTH, DECEMBER 1974
</pre></div></div><div class="yui-ge"><div class="yui-u first"><p>Processing text files in place is also easy. Just call the
<b>input</b> function with the <b>inplace</b> keyword argument
set to 1, and the module takes care of the rest.</p><div class="example">
<b style="example">Example: Using the
fileinput module to convert CRLF to LF</b>
<pre>
# File: <a href="fileinput/fileinput-example-3.py">fileinput-example-3.py</a>

import fileinput, sys

for line in fileinput.input(inplace=1):
    # <i>convert Windows/DOS text files to Unix files</i>
    if line[-2:] == "\r\n":
        line = line[:-2] + "\n"
    sys.stdout.write(line)
</pre></div></div><div class="yui-u">&#160;</div></div><div class="yui-g"></div></div></div></div><div class="yui-b"><div id='menu'><ul><li><b><a href="/" title="Go to effbot.org.">::: effbot.org</a></b></li><li><b><a href="." title="Go to librarybook index page.">::: librarybook :::</a></b></li></ul></div></div></div><div id="ft"><p><a href="http://www.djangoproject.com/"><img src="/media/img/djangosite80x15.gif" border="0" alt="A Django site." title="A Django site." style="vertical-align: bottom;" width="80" height="15" ></a>
rendered by a <a href="http://www.djangoproject.com/">django</a> application.  hosted by <a href="http://www.webfaction.com/shared_hosting?affiliate=slab">webfaction</a>.</p></div></div><script src="/media/js/effbot-min.js" type="text/javascript"></script></body></html>
